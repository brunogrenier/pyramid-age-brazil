{"ast":null,"code":"var _jsxFileName = \"C:\\\\pyramid-age-brazil\\\\src\\\\PopulationPyramidChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\n\n// Declare additional properties on the global window object for JSCharting\n\n// Define interfaces for data points and component props\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Define the PopulationPyramidChart component\nconst PopulationPyramidChart = ({\n  width = '100%',\n  height = '100%',\n  apiUrl,\n  year\n}) => {\n  _s();\n  // Ref to hold reference to the chart container element\n  const chartRef = useRef(null);\n\n  // Fetch data from the provided API URL on component mount or when apiUrl changes\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch data from the provided API URL\n        const response = await fetch(apiUrl);\n\n        // Check if the response is ok\n        if (!response.ok) {\n          throw new Error('Error when obtaining date from the IBGE API');\n        }\n\n        // Parse response data\n        const data = await response.json();\n        const dataProcessed = data[0].resultados;\n\n        // Variables to hold data for chart\n        const dataChartMen = [];\n        const dataChartWomen = [];\n\n        // Determine codes for sex and age group based on selected year\n        var codeSex = 0;\n        var codeGroupAge = 0;\n        if (year === '2022') {\n          codeSex = 2;\n          codeGroupAge = 287;\n        } else if (year === '2010') {\n          codeSex = 2;\n          codeGroupAge = 58;\n        }\n\n        // Process retrieved data\n        for (let i = 0; i < dataProcessed.length; i++) {\n          var sexKey = '';\n          var sex = '';\n          // Extract sex information from the data\n          for (let j = 0; j < dataProcessed[i].classificacoes.length; j++) {\n            if (dataProcessed[i].classificacoes[j].id == codeSex) {\n              const sexKeyValue = dataProcessed[i].classificacoes[j].categoria;\n              sexKey = Object.keys(sexKeyValue)[0];\n              sex = sexKeyValue[sexKey];\n            }\n          }\n          var keyGroupAge = '';\n          var valueGroupAge = '';\n          // Extract age group information from the data\n          for (let j = 0; j < dataProcessed[i].classificacoes.length; j++) {\n            if (dataProcessed[i].classificacoes[j].id == codeGroupAge) {\n              const grupoIdadeChaveValor = dataProcessed[i].classificacoes[j].categoria;\n              keyGroupAge = Object.keys(grupoIdadeChaveValor)[0];\n              valueGroupAge = grupoIdadeChaveValor[keyGroupAge];\n              valueGroupAge = valueGroupAge.replace(' anos', ' years');\n              valueGroupAge = valueGroupAge.replace(' ou mais', ' or more');\n            }\n          }\n\n          // Extract quantity information from the data\n          const amountKeyValue = dataProcessed[i].series[0].serie;\n          const keyAmount = Object.keys(amountKeyValue)[0];\n          var valueAmount = amountKeyValue[keyAmount];\n          valueAmount = parseInt(valueAmount, 10);\n\n          // Determine if the data belongs to males or females and push to respective arrays\n          if (sex === 'Homens') {\n            dataChartMen.push([valueGroupAge, -valueAmount]);\n          }\n          if (sex === 'Mulheres') {\n            dataChartWomen.push([valueGroupAge, valueAmount]);\n          }\n        }\n\n        // Create data points for males and females\n        const dataMen = {\n          name: 'Male',\n          points: dataChartMen\n        };\n        const dataWomen = {\n          name: 'Female',\n          points: dataChartWomen\n        };\n\n        // Render chart using JSCharting library\n        if (window.JSC) {\n          renderChart(dataMen, dataWomen);\n        } else {\n          // Load JSCharting library if not already loaded\n          const script = document.createElement('script');\n          script.src = 'https://code.jscharting.com/latest/jscharting.js';\n          script.async = true;\n          script.onload = () => renderChart(dataMen, dataWomen);\n          document.head.appendChild(script);\n        }\n      } catch (error) {\n        console.error('Error:', error);\n      }\n    };\n\n    // Call fetchData function on component mount or when apiUrl changes\n    fetchData();\n  }, [apiUrl]);\n\n  // Function to render the population pyramid chart\n  const renderChart = (dataMen, dataWomen) => {\n    // Reverse data points to display correctly on the chart\n    dataMen.points.reverse();\n    dataWomen.points.reverse();\n\n    // Configuration object for the chart\n    const config = {\n      debug: true,\n      type: 'horizontal column',\n      title_label_text: '',\n      yAxis: {\n        scale_type: 'stacked',\n        defaultTick_label_text: '{Math.abs(%Value):a2}'\n      },\n      xAxis: {\n        label_text: 'Age',\n        crosshair_enabled: true\n      },\n      defaultTooltip_label_text: 'Ages %xValue:<br><b>%points</b>',\n      defaultPoint_tooltip: '%icon {Math.abs(%Value)}',\n      legend_template: '%name %icon {Math.abs(%Value)}',\n      series: [dataMen, dataWomen]\n    };\n\n    // Render the chart using JSCharting library\n    if (window.JSC && typeof window.JSC.Chart === 'function') {\n      // Check if chartRef.current is not null before calling the Chart function\n      if (chartRef.current) {\n        window.JSC.Chart(chartRef.current, config);\n      } else {\n        console.error('chartRef.current is null.');\n      }\n    } else {\n      console.error('JSCharting.Chart is not defined or is not a function.');\n    }\n  };\n\n  // Render the chart container\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: chartRef,\n    style: {\n      width,\n      height\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 10\n  }, this);\n};\n\n// Export the PopulationPyramidChart component\n_s(PopulationPyramidChart, \"X+1SfQQ6xefXNU27aQW843M7cTw=\");\n_c = PopulationPyramidChart;\nexport default PopulationPyramidChart;\nvar _c;\n$RefreshReg$(_c, \"PopulationPyramidChart\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","PopulationPyramidChart","width","height","apiUrl","year","_s","chartRef","fetchData","response","fetch","ok","Error","data","json","dataProcessed","resultados","dataChartMen","dataChartWomen","codeSex","codeGroupAge","i","length","sexKey","sex","j","classificacoes","id","sexKeyValue","categoria","Object","keys","keyGroupAge","valueGroupAge","grupoIdadeChaveValor","replace","amountKeyValue","series","serie","keyAmount","valueAmount","parseInt","push","dataMen","name","points","dataWomen","window","JSC","renderChart","script","document","createElement","src","async","onload","head","appendChild","error","console","reverse","config","debug","type","title_label_text","yAxis","scale_type","defaultTick_label_text","xAxis","label_text","crosshair_enabled","defaultTooltip_label_text","defaultPoint_tooltip","legend_template","Chart","current","ref","style","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/pyramid-age-brazil/src/PopulationPyramidChart.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\n\r\n// Declare additional properties on the global window object for JSCharting\r\ndeclare global {\r\n  interface Window {\r\n    JSC?: {\r\n      Chart: (element: HTMLElement, config: any) => void;\r\n    };\r\n  }\r\n}\r\n\r\n// Define interfaces for data points and component props\r\ninterface DataPoint {\r\n  name: string;\r\n  points: [string, number][];\r\n}\r\n\r\ninterface PopulationPyramidChartProps {\r\n  width?: string;\r\n  height?: string;\r\n  apiUrl: string;\r\n  year: string;\r\n}\r\n\r\n// Define the PopulationPyramidChart component\r\nconst PopulationPyramidChart: React.FC<PopulationPyramidChartProps> = ({ width = '100%', height = '100%', apiUrl, year }) => {\r\n  // Ref to hold reference to the chart container element\r\n  const chartRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Fetch data from the provided API URL on component mount or when apiUrl changes\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch data from the provided API URL\r\n        const response = await fetch(apiUrl);\r\n\r\n        // Check if the response is ok\r\n        if (!response.ok) {\r\n          throw new Error('Error when obtaining date from the IBGE API');\r\n        }\r\n\r\n        // Parse response data\r\n        const data = await response.json();\r\n        const dataProcessed = data[0].resultados;\r\n\r\n        // Variables to hold data for chart\r\n        const dataChartMen: [string, number][] = [];\r\n        const dataChartWomen: [string, number][] = [];\r\n\r\n        // Determine codes for sex and age group based on selected year\r\n        var codeSex = 0;\r\n        var codeGroupAge = 0;\r\n        if(year === '2022'){\r\n          codeSex = 2;\r\n          codeGroupAge = 287;\r\n        }\r\n        else if(year === '2010'){\r\n          codeSex = 2;\r\n          codeGroupAge = 58;\r\n        }\r\n\r\n        // Process retrieved data\r\n        for (let i = 0; i < dataProcessed.length; i++) {\r\n          var sexKey = '';\r\n          var sex = '';\r\n          // Extract sex information from the data\r\n          for (let j = 0; j < dataProcessed[i].classificacoes.length; j++) {\r\n            if(dataProcessed[i].classificacoes[j].id == codeSex){\r\n              const sexKeyValue = dataProcessed[i].classificacoes[j].categoria;\r\n              sexKey = Object.keys(sexKeyValue)[0];\r\n              sex = sexKeyValue[sexKey];\r\n            }\r\n          }\r\n\r\n          var keyGroupAge = '';\r\n          var valueGroupAge = '';\r\n          // Extract age group information from the data\r\n          for (let j = 0; j < dataProcessed[i].classificacoes.length; j++) {\r\n            if(dataProcessed[i].classificacoes[j].id == codeGroupAge){\r\n              const grupoIdadeChaveValor = dataProcessed[i].classificacoes[j].categoria;\r\n              keyGroupAge = Object.keys(grupoIdadeChaveValor)[0];\r\n              valueGroupAge = grupoIdadeChaveValor[keyGroupAge];\r\n              valueGroupAge = valueGroupAge.replace(' anos', ' years');\r\n              valueGroupAge = valueGroupAge.replace(' ou mais', ' or more');\r\n            }\r\n          }\r\n\r\n          // Extract quantity information from the data\r\n          const amountKeyValue = dataProcessed[i].series[0].serie;\r\n          const keyAmount = Object.keys(amountKeyValue)[0];\r\n          var valueAmount = amountKeyValue[keyAmount];\r\n          valueAmount = parseInt(valueAmount, 10);\r\n\r\n          // Determine if the data belongs to males or females and push to respective arrays\r\n          if (sex === 'Homens') {\r\n            dataChartMen.push([valueGroupAge, -valueAmount]);\r\n          }\r\n          if (sex === 'Mulheres') {\r\n            dataChartWomen.push([valueGroupAge, valueAmount]);\r\n          }\r\n        }\r\n\r\n        // Create data points for males and females\r\n        const dataMen: DataPoint = {\r\n          name: 'Male',\r\n          points: dataChartMen,\r\n        };\r\n\r\n        const dataWomen: DataPoint = {\r\n          name: 'Female',\r\n          points: dataChartWomen,\r\n        };\r\n\r\n        // Render chart using JSCharting library\r\n        if (window.JSC) {\r\n          renderChart(dataMen, dataWomen);\r\n        } else {\r\n          // Load JSCharting library if not already loaded\r\n          const script = document.createElement('script');\r\n          script.src = 'https://code.jscharting.com/latest/jscharting.js';\r\n          script.async = true;\r\n          script.onload = () => renderChart(dataMen, dataWomen);\r\n          document.head.appendChild(script);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n      }\r\n    };\r\n\r\n    // Call fetchData function on component mount or when apiUrl changes\r\n    fetchData();\r\n  }, [apiUrl]);\r\n\r\n  // Function to render the population pyramid chart\r\n  const renderChart = (dataMen: DataPoint, dataWomen: DataPoint) => {\r\n    // Reverse data points to display correctly on the chart\r\n    dataMen.points.reverse();\r\n    dataWomen.points.reverse();\r\n\r\n    // Configuration object for the chart\r\n    const config = {\r\n      debug: true,\r\n      type: 'horizontal column',\r\n      title_label_text: '',\r\n      yAxis: {\r\n        scale_type: 'stacked',\r\n        defaultTick_label_text: '{Math.abs(%Value):a2}',\r\n      },\r\n      xAxis: { label_text: 'Age', crosshair_enabled: true },\r\n      defaultTooltip_label_text: 'Ages %xValue:<br><b>%points</b>',\r\n      defaultPoint_tooltip: '%icon {Math.abs(%Value)}',\r\n      legend_template: '%name %icon {Math.abs(%Value)}',\r\n      series: [dataMen, dataWomen],\r\n    };\r\n\r\n    // Render the chart using JSCharting library\r\n    if (window.JSC && typeof window.JSC.Chart === 'function') {\r\n      // Check if chartRef.current is not null before calling the Chart function\r\n      if (chartRef.current) {\r\n        window.JSC.Chart(chartRef.current, config);\r\n      } else {\r\n        console.error('chartRef.current is null.');\r\n      }\r\n    } else {\r\n      console.error('JSCharting.Chart is not defined or is not a function.');\r\n    }\r\n  };\r\n\r\n  // Render the chart container\r\n  return <div ref={chartRef} style={{ width, height }}></div>;\r\n};\r\n\r\n// Export the PopulationPyramidChart component\r\nexport default PopulationPyramidChart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}